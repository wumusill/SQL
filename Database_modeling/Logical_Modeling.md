# 논리적 모델
**********************

## 모델링 기본기
### Business Rule
* 특정 조직이 운영되기 위해 따라야 하는 정책, 절차, 원칙에 대한 간단 명료한 설명
* `Business Rule`은 항상 간단명료하면서도 필요한 내용을 모두 담고 있어야 함


### Entity, Relationship, Attribute 후보 찾기
1. 모든 명사는 `Entity` 후보
2. 모든 동사는 `Relationship` 후보
3. 하나의 "값"으로 표현할 수 있는 명사는 `Attribute`의 후보

### `Attribute` 후보 찾기 예외 경우
* 하나의 값으로 표현할 수 있더라도, 하나의 `Entity`가 여러 개의 값을 가져야 하는 경우 테이블로 표현하면 `column`, `attribute`가 여러 개로 나눠진다.
#### 문제점
* `NULL`이 많이 생길 수 있게 된다
* 컬럼을 몇 개를 만들어야 되는지 애매해진다
* 조회가 비효율적이게 된다
> 이 경우 새로운 테이블로 만드는게 더 깔끔함


<br/>

## Cardinality
* `Entity type A와 B` 사이에서 `A Entity` 한 개가 `B Entity` 몇 개와 연결될 수 있고, `B Entity` 한 개가 `A Entity` 몇 개와 연결될 수 있는지를 나타내는 개념
* 일대일, 일대다, 다대다

> `Entity`들 사이에 어떤 `Cardinality`가 있는지, 어떤 관계가 있는지에 따라 모델링이 바뀜

### 1:1 관계
* `A Entity` 한 개가 `B Entity` 하나에만 연결될 수 있고, 마찬가지로 `B Entity` 하나도 `A Entity` 하나에만 연결될 수 있는 관계
* 법적 부부 관계, 시민과 주민등록증 관계

### 1:N 관계
* `A Entity` 하나가 `B Entity` 여러 개에 연결될 수 있고, 반대로 `B Entity`는 `A Entity` 하나에만 연결될 수 있는 관계
* 유저와 평가의 관계, 선생님과 수업의 관계
* 다수 쪽에 해당하는 `Entity`에 `foreign key`를 만듦

### M:N 관계
* `A Entity` 하나가 `B Entity` 여러 개에 연결될 수 있고, `B Entity` 하나도 `A Entity` 여러 개에 연결될 수 있는 관계
* 유저와 상품 사이 찜하기 관계, 학생과 수업의 수강 관계
* 둘 사이의 관계를 저장하기 위한 연결 테이블을 만듦
* 두 테이블과 연결 테이블은 일대다 관계

### 최소 카디널리티
* 위 관계는 각각 한 `Entity`가 다른 `Entity`에 대해서 최대 몇 개가 연결될 수 있는지를 표현한 것
* 특정 관계에서는 `Entity`가 없어도 되는지, 최소 하나는 있어야 하는지가 중요
  * ex) 유저와 평가 `Entity` 
  * 유저는 평가를 꼭 남기지 않아도 되지만 평가는 꼭 하나의 유저가 있어야만 함

### 카디널리티 정하기
* '어떤' `Entity`를 사용하는지보다 `Entity`를 '어떻게' 사용하고 싶은지에 따라 결정됨
* 회사의 비즈니스 룰을 사용해서 알아내야 함


* 유저와 프로필이라는 `Entity`가 있을 때
* 페이스북은 1:1 관계지만 넷플릭스는 1:N 관계
> 비즈니스 룰을 정확하게 파악한 후 이걸 바탕으로 카디널리티를 찾아낼 수 있음